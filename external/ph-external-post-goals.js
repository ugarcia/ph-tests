// Generated by CoffeeScript 1.8.0
(function() {
  var PhantomTest, amount, args, argsString, clubId, env, host, interval, phExt, platform, _ref, _ref1, _ref2, _ref3;

  PhantomTest = require('../ph-base');

  args = require('system').args;

  argsString = args.join(" ");

  env = ((_ref = /-{0,2}env[= ](\w+)/.exec(argsString)) != null ? _ref[1] : void 0) || 'dev';

  host = ((_ref1 = /-{0,2}host[= ](\w+)/.exec(argsString)) != null ? _ref1[1] : void 0) || 'schalke';

  amount = parseInt(((_ref2 = /-{0,2}amount[= ](\d+)/.exec(argsString)) != null ? _ref2[1] : void 0) || '1', 10);

  interval = parseInt(((_ref3 = /-{0,2}interval[= ](\d+)/.exec(argsString)) != null ? _ref3[1] : void 0) || '0', 10);

  platform = ['www', 'qat'][['prod', 'dev'].indexOf(env)];

  clubId = [1, 21, 18, 14][['hsv', 'hertha', 'schalke', 'bayer'].indexOf(host)];

  if (!interval && amount > 1) {
    interval = 10;
  }

  phExt = new PhantomTest();

  phExt.run({
    url: 'about:blank',
    interactions: 'external-post-goals.js',
    onTestsCompleted: function() {
      return phExt.defaultOnTestsCompleted('init', clubId, platform, amount, interval);
    }
  });

}).call(this);
